<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>AbieCats – Nat-Natcats Previewer</title>
<style>body{background:#000;color:#0f0;font-family:Arial;text-align:center;padding:20px;}
input,button{padding:12px;font-size:18px;margin:10px;}
#viewer{border:4px solid #0f0;margin:30px auto;box-shadow:0 0 40px #0f0;border-radius:16px;width:340px;height:460px;position:relative;background:#111;}
pre{color:#0f0;background:#111;padding:15px;border-radius:12px;display:inline-block;font-size:14px;}</style></head><body>
<h1>AbieCats – Nat-Natcats</h1>
<p>Enter any block with "ab" in its hash</p>
<input id="block" placeholder="e.g. 1, 5, 11, 28..." style="width:300px"><button onclick="preview()">Preview</button><br><br>
<div id="viewer"></div><br><pre id="info"></pre>

<script>
// — FINAL NAT-NATCATS RENDERER (with pupil color + 69 star) —
// (this is the exact code from our last working version — copy-paste safe)
const root = document.getElementById('viewer');
const colorMap = {1:"#5A23D6",2:"#9D75DC",3:"#EBE43B",4:"#1B5AD4",5:"#855F45",6:"#B7B2CF",7:"#12C15F",8:"#E552A9",9:"#E44D2A",0:"#4E4D59"};
const colorMap2 = {1:"#4D1BB3",2:"#8B60DC",3:"#EBCF3B",4:"#1749A8",5:"#634A37",6:"#7F7D95",7:"#149D53",8:"#D93897",9:"#D3482A",0:"#37363F"};
const colorMap3 = {1:"#8FE500",2:"#3FD7D7",3:"#E6A000",4:"#E58EE0",5:"#E56723",6:"#E51A32",7:"#009C22",8:"#252BD7",9:"#9695C1"};
const colorMap4 = {1:"#FF0000",2:"#00FF00",3:"#0000FF",4:"#FFFF00",5:"#FF00FF",6:"#00FFFF",7:"#FFA500",8:"#800080",9:"#A52A2A",0:"#000000"};

async function preview(){
  const h = document.getElementById("block").value || '1';
  const hash = await fetch(`https://blockstream.info/api/block-height/${h}`).then(r=>r.text());
  if(!hash.includes("ab")) return alert("No 'ab' in this blockhash");
  const hexDigits = hash.match(/.{1,2}/g).slice(0,8).map(hx=>parseInt(hx,16)%10);
  const digits = hexDigits.reverse();
  const originalString = h.toString();
  root.innerHTML = generateCat(digits, originalString);
  document.getElementById("info").textContent = JSON.stringify({
    block: h,
    traits: {bg:colorMap[digits[0]], fur:colorMap2[digits[1]], eyes:colorMap3[digits[6]], pupil:colorMap4[digits[7]]],
    special: originalString.includes('69') ? "69 Star" : "None"
  },null,2);
}

function generateCat(d, n) {
  let s = '';
  const c1 = colorMap[d[0]], c2 = colorMap2[d[1]], c3 = colorMap2[d[2]], c4 = colorMap2[d[3]];
  const nose = colorMap2[d[4]], stripe = colorMap[d[5]], tooth = colorMap3[d[6]], pupil = colorMap4[d[7]];
  s += `<div style="position:absolute;top:55px;left:100px;"><svg width="80" height="80"><path d="M0 0L80 80L0 80Z" fill="${c3}"/></svg></div>`;
  s += `<div style="position:absolute;top:55px;left:245px;"><svg width="80" height="80"><path d="M0 80L80 0L80 80Z" fill="${c4}"/></svg></div>`;
  s += `<div style="position:absolute;top:340px;left:100px;"><svg width="78" height="85"><rect width="78" height="85" fill="${c2}"/></svg></div>`;
  s += `<div style="position:absolute;top:135px;left:100px;"><svg width="215" height="209"><path fill-rule="evenodd" clip-rule="evenodd" d="M215 0L0 0L0 209L215 209L215 94L143 94L143 58L215 58ZM22 58L94 58L94 94L22 94ZM197 155H94V180H197V155Z" fill="${c1}"/></svg></div>`;
  s += `<div style="position:absolute;top:250px;left:215px;"><svg width="30" height="30"><path d="M30 30L0 0H30Z" fill="${nose}"/></svg></div>`;
  s += `<div style="position:absolute;top:360px;left:100px;"><svg width="40" height="54"><rect width="40" height="18" fill="${stripe}"/><rect y="36" width="40" height="18" fill="${stripe}"/></svg></div>`;
  s += `<div style="position:absolute;top:275px;left:0;"><svg width="46" height="150"><path d="M46 150H0L0 25C0 11.3 10.3 0 23 0C35.7 0 46 11.3 46 25Z" fill="${c2}"/></svg></div>`;
  s += `<div style="position:absolute;top:285px;left:185px;"><svg width="42" height="37"><rect width="42" height="37" fill="${tooth}"/></svg></div>`;
  s += `<div style="position:absolute;top:285px;left:245px;"><svg width="42" height="37"><rect width="42" height="37" fill="${tooth}"/></svg></div>`;
  s += `<div style="position:absolute;top:195px;left:130px;"><svg width="150" height="38"><circle cx="30" cy="19" r="15" fill="${pupil}"/><circle cx="120" cy="19" r="15" fill="${pupil}"/></svg></div>`;
  if(n.includes('69')) s += `<div style="position:absolute;top:290px;left:350px;"><svg width="20" height="20"><path d="M10 0L12.5 6.5L19 9L12.5 11.5L10 18L7.5 11.5L1 9L7.5 6.5Z" fill="#FFD700"/></svg></div>`;
  return s;
}

preview();
</script>
</body></html>
